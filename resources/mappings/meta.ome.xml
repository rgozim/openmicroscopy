<types>
	
	<!-- MANAGEMENT -->
	<type id="ome.model.meta.ExperimenterGroup" named="true" described="true">
		<properties>
			<child name="groupExperimenterMap" type="ome.model.meta.GroupExperimenterMap"
        target="ome.model.meta.Experimenter"/>
		</properties>
	</type>
	
	<type id="ome.model.meta.Experimenter" global="true">
		<!-- ## needs to be ome_name -->
		<properties>
			<parent name="groupExperimenterMap" type="ome.model.meta.GroupExperimenterMap"
        target="ome.model.meta.ExperimenterGroup"/>
			<required name="omeName" type="string" unique="true"/>
			<required name="firstName" type="string"/>
			<optional name="middleName" type="string"/>
			<required name="lastName" type="string"/>
			<optional name="institution" type="string"/>
			<component id="ome.model.internal.Email" required="false">
				<optional name="email" type="string"/>
			</component>
			<!-- ## add to dsl [email/] -->		
		</properties>
	</type>
	
	<link id="ome.model.meta.GroupExperimenterMap" 
		from="ome.model.meta.ExperimenterGroup"
		to="ome.model.meta.Experimenter"/>
	
	<!-- EVENTS -->
	<enum id="ome.model.enums.EventType">
		<entry name="Import"/>
		<entry name="Internal"/>
		<entry name="User"/>
		<entry name="Test"/>
	</enum>

	<type id="ome.model.meta.Event" mutable="false" global="true">
		<properties>
      <!-- Type is not really optional. Needed to bootstrap.
        Constraint is added later -->
			<optional name="type" type="ome.model.enums.EventType"/>
			<required name="time" type="timestamp"/>
			<optional name="status" type="string"/>
			<onemany name="logs" type="ome.model.meta.EventLog"/>
		</properties>
	</type>    

	<type id="ome.model.meta.EventLog" mutable="false">
		<properties>
			<required name="type" type="string"/>
			<required name="action" type="string"/>
			<component id="ome.model.internal.StringArray" required="true">
				<required name="idList" type="string"/>
			</component>
			<manyone name="event" type="ome.model.meta.Event"/>
			<onemany name="diffs" type="ome.model.meta.EventDiff"/>
		</properties>
	</type>
	

	<type id="ome.model.meta.EventDiff" mutable="false">
		<properties>
			<manyone name="logs" type="ome.model.meta.EventLog"/>
		</properties>
	</type>

</types>
