<?xml version="1.0" encoding="UTF-8"?>
<!--
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
# Copyright (C) 2005 Open Microscopy Environment
#       Massachusetts Institue of Technology,
#       National Institutes of Health,
#       University of Dundee
#
#
#
#    This library is free software; you can redistribute it and/or
#    modify it under the terms of the GNU Lesser General Public
#    License as published by the Free Software Foundation; either
#    version 2.1 of the License, or (at your option) any later version.
#
#    This library is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
#    Lesser General Public License for more details.
#
#    You should have received a copy of the GNU Lesser General Public
#    License along with this library; if not, write to the Free Software
#    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
#
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-->
<types>

	<!-- ROIS -->
	<type id="ome.model.roi.RoiSet">
		<properties>
			<child name="roiMaps" type="ome.model.roi.RoiMap"
				target="ome.model.roi.Roi5D"/>
			<optional name="sourceType" type="string"/>
			<optional name="sourceId" type="int"/> <!-- ## Long? -->
		</properties>
	</type>

	<link id="ome.model.roi.RoiMap">
		<properties>
			<from_parent type="ome.model.roi.RoiSet"/>
			<to_child type="ome.model.roi.Roi5D"/>
		</properties>
	</link>

	<!--abstract id="ome.model.roi.Roi">
		<properties>
			<required name="indexMin" type="int"/>
			<required name="indexMax" type="int"/>
		</properties>
	</abstract>-->

	<type id="ome.model.roi.Roi5D">
		<properties>
			<parent name="roiMaps" type="ome.model.roi.RoiMap"
				target="ome.model.roi.RoiSet"/>
			<required name="pixels" type="ome.model.core.Pixels"/>
			<onemany name="extents" type="ome.model.roi.RoiExtent" inverse="roi5d"/>
		</properties>
	</type>

	<type id="ome.model.roi.RoiExtent">
		<properties>
			<required name="zindexMin" type="int"/>
			<required name="zindexMax" type="int"/>
			<required name="tindexMin" type="int"/>
			<required name="tindexMax" type="int"/>
			<required name="cindexMin" type="int"/>
			<required name="cindexMax" type="int"/>
			<manyone name="roi5d" type="ome.model.roi.Roi5D"/><!--TODO-->
			<onemany name="shapes" type="ome.model.roi.ShapeArea" inverse="extent"/>
		</properties>
	</type>	

	<abstract id="ome.model.roi.ShapeArea">
		<properties>
			<manyone name="extent" type="ome.model.roi.RoiExtent"/>
		</properties>
	</abstract>

	<type id="ome.model.roi.Square" superclass="ome.model.roi.ShapeArea">
		<properties>
			<required name="upperLeftX" type="int"/>
			<required name="upperLeftY" type="int"/>
			<required name="lowerRightX" type="int"/>
			<required name="lowerRightY" type="int"/>
		</properties>
	</type>
</types>
