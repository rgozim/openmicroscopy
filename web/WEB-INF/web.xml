<?xml version="1.0" encoding="UTF-8"?>
<!--
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
# Copyright (C) 2005 Open Microscopy Environment
#       Massachusetts Institue of Technology,
#       National Institutes of Health,
#       University of Dundee
#
#
#
#    This library is free software; you can redistribute it and/or
#    modify it under the terms of the GNU Lesser General Public
#    License as published by the Free Software Foundation; either
#    version 2.1 of the License, or (at your option) any later version.
#
#    This library is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
#    Lesser General Public License for more details.
#
#    You should have received a copy of the GNU Lesser General Public
#    License along with this library; if not, write to the Free Software
#    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
#
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-->

<!--
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Written by:  Josh Moore <josh.moore@gmx.de>
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-->

<!--
	
  web.xml is the standard web application descriptor. It provides
  definitions for:
 
  1) configuring Spring and loading its context
  2) creating the dispatcher servlet for both binary and html request
  3) setting up filters for security (Acegi) and other needs.
 
-->

<!DOCTYPE web-app
    PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
    "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>

    <!-- TODO
    @maven.tomcat.generated@
    -->
	
	<context-param>
	    <param-name>contextConfigLocation</param-name>
    	<param-value>
    		/WEB-INF/aop.xml
    		/WEB-INF/config-web.xml 
    		/WEB-INF/services.xml 
     		/WEB-INF/security.xml 
    		/WEB-INF/dao.xml 			
			/WEB-INF/hibernate.xml 		
    		/WEB-INF/dbcp.xml 			
    	</param-value>
	</context-param>

   <filter>
        <filter-name>Acegi Filter Chain Proxy</filter-name>
        <filter-class>net.sf.acegisecurity.util.FilterToBeanProxy</filter-class>
        <init-param>
            <param-name>targetClass</param-name>
            <param-value>net.sf.acegisecurity.util.FilterChainProxy</param-value>
        </init-param>
   </filter>

    <filter-mapping>
      <filter-name>Acegi Filter Chain Proxy</filter-name>
      <url-pattern>/*</url-pattern>
    </filter-mapping>

	<listener>
    	<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
	</listener>
   
    <servlet>
        <servlet-name>facade</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

	<servlet>
	 	<servlet-name>dwr-invoker</servlet-name>
      	<display-name>DWR Servlet</display-name>
      	<servlet-class>uk.ltd.getahead.dwr.DWRServlet</servlet-class>
      	<init-param>
       		<param-name>debug</param-name>
       		<param-value>true</param-value>
      	</init-param>
    </servlet>
	    
    <servlet-mapping>
         <servlet-name>facade</servlet-name>
         <url-pattern>/</url-pattern>
    </servlet-mapping>

	<!-- TODO Needs to be done in facade-servlet.xml 
 		 http://bram.jteam.nl/?p=2 
	-->
    <servlet-mapping>
    	<servlet-name>dwr-invoker</servlet-name>
    	<url-pattern>/dwr/*</url-pattern>
    </servlet-mapping>

</web-app>
