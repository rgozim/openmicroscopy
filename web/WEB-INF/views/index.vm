<html>
<head>
  <title>DWR Test</title>
  <!-- These paths use .. so that they still work behind a path mapping proxy. The fully qualified version is more cut and paste friendly. -->
  <script type='text/javascript' src='../interface/hi.js'></script>
  <script type='text/javascript' src='../engine.js'></script>
  <script type='text/javascript' src='../util.js'></script>
  <script type='text/javascript'>
  function objectEval(text)
  {
    // eval() breaks when we use it to get an object using the { a:42, b:'x' }
    // syntax because it thinks that { and } surround a block and not an object
    // So we wrap it in an array and extract the first element to get around
    // this.
    // The regex = [start of line][whitespace]{[stuff]}[whitespace][end of line]
    text = text.replace(/\n/g, ' ');
    text = text.replace(/\r/g, ' ');
    if (text.match(/^\s*\{.*\}\s*$/))
    {
      text = '[' + text + '][0]';
    }
    return eval(text);
  }
  </script>

  <style>
    input.itext { font-size: smaller; background: #E4E4E4; border: 0; }
    input.ibutton { font-size: xx-small; border: 1px outset; margin: 0px; padding: 0px; }
    span.reply { background: #ffffdd; white-space: pre; }
    span.warning { font-size: smaller; color: red; }
  </style>
</head>
<body onload='DWRUtil.useLoadingMessage()'>

<h2>Methods For: hi (ome.facade.PrimitiveHierarchyBrowsingImpl)</h2>
<p>To use this class in your javascript you will need the following script includes:</p>
<pre>
  &lt;script type='text/javascript' src='<a href='/omero/dwr/interface/hi.js'>/omero/dwr/interface/hi.js</a>'&gt;&lt;/script&gt;

  &lt;script type='text/javascript' src='<a href='/omero/dwr/engine.js'>/omero/dwr/engine.js</a>'&gt;&lt;/script&gt;
</pre>
<p>In addition there is an optional utility script:</p>
<pre>
  &lt;script type='text/javascript' src='<a href='/omero/dwr/util.js'>/omero/dwr/util.js</a>'&gt;&lt;/script&gt;
</pre>

<p>Replies from DWR are shown with a yellow background if they are simple or in an alert box otherwise.<br/>
The inputs are evaluated as Javascript so strings must be quoted before execution.</p>
<p>There are 11 declared methods:</p><ul>

<li>
  loadPDIHierarchy(
    <input class='itext' type='text' size='10' value='""' id='p00' title='Will be converted to: java.lang.String'/>, 
    <input class='itext' type='text' size='10' value='0' id='p01' title='Will be converted to: int'/>
  );
  <input class='ibutton' type='button' onclick='hi.loadPDIHierarchy(reply0,objectEval($("p00").value),objectEval($("p01").value));' value='Execute'  title='Calls hi.loadPDIHierarchy(). View source for details.'/>
  <script type='text/javascript'>
    var reply0 = function(data)
    {
      if (data != null && typeof data == 'object') alert(DWRUtil.toDescriptiveString(data, 2));
      else DWRUtil.setValue('d0', DWRUtil.toDescriptiveString(data, 1));
    }
  </script>

  <span id='d0' class='reply'></span>
</li>
</ul>
</div>

</body></html>
